<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="../assets/lumen.css?v=a873d521d0dc19a2dfef6f882da5af32">
        <script src="../assets/lumen.min.js?v=a873d521d0dc19a2dfef6f882da5af32" async></script>
        <title>How To Survive The Reddit Effect</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">

        <meta name="description" content="Yesterday I was casually flipping around some apps on my iPhone and opened up my Adsense application which shows me how ">
        <meta property="og:title" content="How To Survive The Reddit Effect" />
        <meta property="og:url" content="https://new.duanestorey.com/posts/how-to-survive-the-reddit-effect.html" />
        <meta name="twitter:title" content="How To Survive The Reddit Effect">
        <meta name="twitter:description" content="Yesterday I was casually flipping around some apps on my iPhone and opened up my Adsense application which shows me how ">
       
                <meta name="twitter:image" content="https://new.duanestorey.com/assets/posts/2013/reddit-spike.webp">
                <meta property="og:image" content="https://new.duanestorey.com/assets/posts/2013/reddit-spike.webp" />
        <meta name="twitter:card" content="summary_large_image">    
    </head>
    <body class="posts posts-how-to-survive-the-reddit-effect">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="/">The Duane Storey</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                            <a class="nav-item nav-link" href="/">Home</a>
                            <a class="nav-item nav-link" href="/pages/hiking.html">Hiking</a>
                            <a class="nav-item nav-link" href="/pages/about.html">About</a>
                            <a class="nav-item nav-link" href="/pages/contact.html">Contact</a>
                    </div>
                </div>
            </div>
        </nav>


    <div class="container mt-4">
        <article>    
            <h2 class="mt-4">How To Survive The Reddit Effect</h2>
            <div class="meta mb-2 text-primary fs-6 fw-light">
                 Published on October 7th, 2013
            </div>

            <div class="content mt-3">
                    <div class="mt-4 mb-4"><img src="https://new.duanestorey.com/assets/posts/2013/reddit-spike.webp" alt="Featured Image" class="img-fluid" /></div>
                <p>Yesterday I was casually flipping around some apps on my iPhone and opened up my Adsense application which shows me how much I've made from Google Adsense each day. I noticed almost immediately that there was an anomaly - for the current day I had served almost 4,000 ad impressions, when normally it would have been more like 200 around that time of day. I then followed up by logging into Google Analytics to see if I had been mentioned somewhere, and sure enough I noticed that my number one referrer was Reddit.com at the time. Reddit gets around one billion page views a month I believe, so any mention on that website can be enough to completely cripple a website with new visitors.</p>
<p>Apparently someone had shared a recent post of mine on Reddit discussing how to cut a SIM into a Micro or Nano SIM. It's not exactly rocket science, as many others pointed out in the comments. But it generated a lot of discussion from people who said it does indeed work (which it does) and people who didn't think it would work at all.</p>
<p>But for me I wasn't really interested in the comments on Reddit, but rather whether or not my website was going to be able to handle the load of all those new users. At the time Google Analytics was showing around 300 active users, and the CPU for my $20/mo VPS unit was sitting around 35%. I tried to log into the admin panel for WordPress, but I couldn't get to it from Amsterdam due to my slow internet connection and the massive amount of traffic my website was serving.</p>
<p>My website is actually fairly well-tuned for a WordPress based website, but I've never had to face a traffic spike like this. I wrote a post a few weeks ago talking about <a href="http://www.migratorynerd.com/tips/wordpress/5-ways-to-speed-up-your-wordpress-website/">how to speed up your WordPress website</a>, and I thankfully completed all those same optimizations on my own website prior to the Reddit mention.</p>
<p>First, I had the APC PHP cache installed on my server which greatly reduces the load for PHP scripts. Second, I had W3 total cache installed which essentially removes PHP and WordPress from the equation for spikes like this, since Apache will simply serve static html files after they are cached. I also had Infinity Cache installed, which is a soon-to-be-released mobile caching solution for WPtouch. And lastly, I serve all of my static website assets from MaxCDN, which is a global content delivery system.</p>
<p>So in terms my site's ability to actually be able to survive the Reddit Effect, I was in pretty good shape.</p>
<p>But since I couldn't log into my admin panel, I decided to try and optimize Apache and PHP a bit further to try and make my server a bit more responsive.</p>
<h3>httpd.conf Adjustments</h3>
<p>One of the first adjustments I did was to increase the MaxServers for httpd up to 20 from 10. Since the VPS is memory limited, I left it at 10 simply because I didn't see much point raising it higher. But I figured doubling the amount of processes available to handle the incoming requests would help, and it did.</p>
<p>Another quick adjustment I made was to disable KeepAlive connections. Normally KeepAlive connections are good because clients can request multiple items in essentially the same request. But often an Apache process will continue waiting around for more requests, even after the client is finish. That means that particular Apache process isn't available to serve any more requests until it essentially times out. So I disabled KeepAlives and then rebooted Apache from the command line.</p>
<p>After my changes Apache stabilized at serving over 100 page views per minute, with approximately 500 visitors active at any time.</p>
<p><img src="https://new.duanestorey.com/assets/posts/2013/reddit-spike.webp" alt="Reddit Traffic Spike" /><p class="caption text-center fst-italic"> Reddit Traffic Spike</p></p>
<h3>Final Results</h3>
<p>The total traffic onslaught lasted about eight hours, during which time my website served close to 20,000 page views. During the most intensive hour, there were almost 6,000 page views.</p>
<p><img src="https://new.duanestorey.com/assets/posts/2013/traffic-spike.webp" alt="Traffic Spike" /><p class="caption text-center fst-italic"> Traffic Spike</p></p>
<p>I logged into <a href="http://www.kqzyfj.com/click-4154459-11373487">MaxCDN</a> after it was over to check the traffic stats, and they showed approximately 50 GB worth of data transferred during that time period, which is about 5% of the total amount I'm allocated <em>for an entire year</em>. That's a substantial amount of traffic. I haven't done the math, but I suspect my little VPS would have basically fallen over had I not used the CDN, simply because it wouldn't have been able to keep up with the bandwidth requirements of all those requests.</p>
<p><img src="https://new.duanestorey.com/assets/posts/2013/maxcdn.webp" alt="MaxCDN During The Spike" /><p class="caption text-center fst-italic"> MaxCDN During The Spike</p></p>
<h3>Key Takeaways</h3>
<p>For the most part my little $20 <a href="https://www.digitalocean.com/?refcode=c62a4d3586fc">DigitalOcean VPS</a> stayed active during the eight hour assault on it by Reddit users. It amounted to nearly 20,000 unique page views during that period of time, with almost 50GB worth of data transferred. I'm quite pleased the VPS didn't fall over, and I owe that mostly to the various caching systems I had in place, as well as my choice for serving most of my static content from a CDN.</p>
<p>A few people on Reddit commented that my site was down during that period, which was my experience at the beginning as well. This was simply the result of having so many people try to view that particular webpage that Apache couldn't keep up with the requests. But after making a few quick Apache adjustments, Apache's ability to handle webpages nearly doubled, which allowed me to log back into my site and seemed to make the website in general more responsive for everyone.</p>
<p>So even if you have a small VPS, by installing W3 Total Cache and utilizing a CDN like <a href="http://www.kqzyfj.com/click-4154459-11373487">MaxCDN</a>, you should be able to handle the Reddit Effect if it happens to you too.</p>
<p>I'm in the process of setting up another small $5/mo VPS with a Varnish instance in case it ever happens again. With that addition to the mix I don't think I'll have any issues at all with being mentioned on Reddit again in the future.</p>

                    <div class="tax">
                        <button type="button" class="btn btn-secondary btn-sm">blogging</button>
                        <button type="button" class="btn btn-secondary btn-sm">cache</button>
                        <button type="button" class="btn btn-secondary btn-sm">cdn</button>
                        <button type="button" class="btn btn-secondary btn-sm">infinity cache</button>
                        <button type="button" class="btn btn-secondary btn-sm">maxcdn</button>
                        <button type="button" class="btn btn-secondary btn-sm">reddit</button>
                        <button type="button" class="btn btn-secondary btn-sm">w3</button>
                    </div>
            </div>

            <div class="comments mt-4 pt-4">
                <div id="disqus_thread"></div>
                    <script>
                        /**
                        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
                        /*
                        var disqus_config = function () {
                        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                        };
                        */
                        (function() { // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');
                        s.src = 'https://dsnew.disqus.com/embed.js';
                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                        })();
                    </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
        </article>  
    </div>


        <footer class="bg-dark pt-4 pb-4 mt-4 mb-4">
            <div class="container text-center text-white">
                All content copyright &copy; 2024<br/>Content generated using Crossroads static generator
            </div>

            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2124361-1"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());

                gtag('config', 'UA-2124361-1');
            </script>
        </footer>   
    </body>
</html>