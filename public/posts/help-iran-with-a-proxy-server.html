<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="../..//themes/ds/assets/bundle.css?v=1">
        <title>Help Iran With A Proxy Server</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body class="posts slug-help-iran-with-a-proxy-server blog">
<nav class="navbar is-black" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item" href="/">Home</a>
            
            <a role="button" class="navbar-burger" data-target="primary-menu" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div class="navbar-menu" id="primary-menu">

        </div>
    </div>
</nav>

<header class="hero is-primary">   
    <div class="hero-body">
        <div class="container">
            <h2 class="title is-2">Hola, I'm Duane</h2>
            <h3 class="subtitle is-5">A few interesting things about me:</h3>

            <div class="columns has-text-centered">
                <div class="column">
                    <div class="fas fa-code"> </div> 
                    <p class="desc">I've developed software used by over 40 million people, including the previous media engine in Yahoo! Messenger.</p>
                    <p><a class="button is-primary is-small" href="/topic/code/">More Software</a></p> 
                </div>
                <div class="column is-hidden-touch">
                    <div class="fas fa-wrench"> </div> 
                    <p class="desc">I engineer lots of cool things such as hi-fi audio amplifiers and solar batteries for camping.</p>
                    <p><a class="button is-primary is-small"  href="/topic/projects/">More Projects</a></p> 
                </div>
                <div class="column">
                    <div class="fas fa-chart-bar"> </div> 
                    <p class="desc">I co-wrote the previous #1 plugin for WordPress (out of 20,000), WPtouch, and eventually sold it.</p>
                    <p><a class="button is-primary is-small" href="/topic/business/">More Business</a></p> 
                </div>
                <div class="column">
                    <div class="fas fa-plane-departure"> </div> 
                    <p class="desc">I've visited 44 countries in the last seven years and currently live in Valencia on the eastern coast of Spain.</p><p>
                    <a class="button is-primary is-small" href="/topic/travel/">More Travel</a></p>
                </div>
                <div class="column is-hidden-mobile">
                    <div class="fas fa-camera-retro"> </div> 
                    <p class="desc">I am a published concert, travel, portrait, and landscape photographer; I currently shoot Fuji XT lenses.</p>
                    <p><a class="button is-primary is-small"  href="/topic/photography/">More Photography</a></p> 
                </div>
            </div>
        </div>

        <div class="container newsletter">
            <div class="has-text-centered">
                <p>Sign-up to my exclusive business-oriented mailing list for occassional updates:</p>
                <form action="//migratorynerd.us7.list-manage.com/subscribe/post?u=80cbf36c84f738b5623a02a85&amp;id=97101f05dd" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                    <div id="mc_embed_signup_scroll">
                        <div class="mc-field-group">
                            <input type="email" placeholder="Enter your email address...." name="EMAIL" class="required email" id="mce-EMAIL"><input type="submit" value="Join 725 Subscribers" name="subscribe" id="mc-embedded-subscribe" class="button is-info"><input type="submit" value="Sign-up" name="subscribe" id="mc-embedded-subscribe-mobile" class="button is-info">
                        </div>
                        <div id="mce-responses" class="clear">
                            <div class="response" id="mce-error-response" style="display:none"></div>
                            <div class="response" id="mce-success-response" style="display:none"></div>
                        </div>   
                        <div style="position: absolute; left: -5000px;" aria-hidden="true">
                            <input type="text" name="b_80cbf36c84f738b5623a02a85_97101f05dd" tabindex="-1" value="">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</header>



    <article class="main section content">
        <div class="container">
            <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
<p>As many people know, there are protests going on in Iran, and the Iranian government is actively trying to stop the flow of information both in and out of the country. Twitter has been instrumental in helping getting the word out about what is going on there, so much so that they recently postponed a critical maintenance period simply so Iranian users could continue to use the service. A few hours ago I saw some requests on Twitter from Iranians asking for international proxies such that they could continue to use the Internet.</p>
<h2>Creating the AMI on EC2</h2>
<p>Given that I have an EC2 account, and that setting up a proxy isn't too difficult, I decided to set one up. If you've never used EC2 before, this is a <a href="http://www.robertsosinski.com/2008/01/26/starting-amazon-ec2-with-mac-os-x/">great primer article</a>, so I'm not going to do an EC2 tutorial here.</p>
<p>First thing I did was to fire up a Fedora core image using my generated key-pair:</p>
<p>ec2-run-instances ami-225fba4b -k ec2-keypair</p>
<p>Then I logged into that instance as root so that I could configure the proxy server:</p>
<p>ssh -i ec2-keypair root@ec2-174-129-169-124.compute-1.amazonaws.com</p>
<p>You'll have to substitute your own instance identifier for the login information, which you can get using the command <strong>ec2-describe-instances</strong>.</p>
<p>Once inside, I went about editing the httpd.conf file in the /etc directory. I activated the proxy server and restricted access to Iranian IP addresses only, which I found on various lists on the Internet. The actual blob I added <a href="http://www.migratorynerd.com/wp-content/uploads/2009/06/proxy.rtf">can be found here</a>.</p>
<p>I then restarted Apache, and proceeded to test it using Safari on my local machine (I also added my public IP address to the Allow list). It seemed to work like a charm.</p>
<p>Next step is to allocate a public IP using EC2. This can be done using the following command:</p>
<p>ec2-allocate-address</p>
<p>You'll then get a public IP address. All that's left is to assign it to your running instance using a command like:</p>
<p>ec2-associate-address -i i-5d478934 some-ip-address</p>
<p>At that point you'll have a public web proxy on port 80 that will only allow proxy connections from Iranian IP addresses.</p>
<p>I did a quick Google and found a few people begging for an <a href="http://developer.amazonwebservices.com/connect/thread.jspa?threadID=33059&amp;tstart=0">AMI image to do this for Iranian users</a>, so I've bundled one up and made it public. In theory you'll just have to launch a new instance based on this AMI, and assign a public IP address to it. Everything else should be taken care of. Remember to only distribute proxy IP addresses privately, as Iranian officials are blocking them as they find them.</p>
<p>The AMI that does this is ami-a37b9dca. If you have any problems, drop a comment.</p>
<p>Update - apparently I accidentally included my cert file in the AMI. I've since regenerated it, so it can't be used for anything. The AMI still works fine though, so feel free to use it.</p>
<h2>How does it work</h2>
<p>Once you setup a proxy server and give the IP address to someone, they can simply set that IP address as their web proxy. For example, in Safari you set it in Network preferences:</p>
<p><img src="images/Picture-14.png" alt="" /></p>
<p>For everyone outbound request, the browser will contact the proxy instead and ask it to grab the actual information itself and forward it along. That way, if a service such as Twitter is blocked, the proxy will get the information from Twitter itself and forward it onto the client. So once you have a public IP address associated with your EC2 instance, simply get that into the hands of someone in Iran, and they'll be able to use your proxy server to access sites on the Internet that are blocked in Iran.</p>
        </div>
    </article>

            <div class="footer has-text-centered">
           <div class="level">
                <div class="level-left">
                   
                </div>
                <div class="level-right">
                    All content &copy; Copyright 2009 by Duane Storey &amp; Lindell Media Solutions Inc.
                </div>
            </div>
        </div>
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2124361-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){ dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'UA-2124361-1');
        </script>
    </body>
</html>